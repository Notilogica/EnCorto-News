<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Noticias Curadas</title>
    <link rel="stylesheet" href="style.css">

    <!-- RSS Feed apuntando a Replit -->
    <link id="rss-link" rel="alternate" type="application/rss+xml" title="RSS Feed de Noticias" href="" />
</head>
<body>
    <div class="video-intro" id="videoContainer">
        <video id="video-horizontal" autoplay muted playsinline>
            <source src="intro-horizontal.mp4" type="video/mp4">
        </video>
        <video id="video-vertical" autoplay muted playsinline>
            <source src="intro-vertical.mp4" type="video/mp4">
        </video>
    </div>

    <div class="site-wrapper">
        <div id="iframe-container">
            <iframe id="iframe-news" src="" frameborder="0" allowfullscreen></iframe>
        </div>
        <footer>
            <p>&copy; 2025 Noticias Curadas. Todos los derechos reservados.</p>
            <p>Este sitio puede contener enlaces de marketing de afiliados. Podemos recibir comisión por compras referidas.</p>
            <p>Políticas de Amazon y otras plataformas aplican.</p>
        </footer>
    </div>

    <!-- Obtener URL de Replit desde Netlify Function -->
    <script>
      fetch('/.netlify/functions/getReplitUrl')
        .then(res => res.text())
        .then(url => {
            window.REPLIT_URL = url;
            // Asignar al iframe
            document.getElementById('iframe-news').src = `${url}/`;
            // Asignar al RSS
            document.getElementById('rss-link').href = `${url}/rss`;
            console.log("Replit URL cargada desde Netlify:", window.REPLIT_URL);
        })
        .catch(err => console.error("Error al obtener la URL de Replit:", err));
    </script>

    <script src="script.js"></script>
</body>
</html>